build:
  uri: https://github.com/tommaso-borgato/wildfly-distributed-sessions-infinispan.git
  ref: main
  s2i:
    buildApplicationImage: true
deploy:
  env:
    - name: INFINISPAN_SERVER_HOST
      value: 'example-infinispan'
    - name: INFINISPAN_SERVER_PORT
      value: '11222'
    - name: INFINISPAN_SERVER_TRUST_STORE_FILENAME
      value: '/var/run/secrets/kubernetes.io/serviceaccount/service-ca.crt'
    - name: INFINISPAN_SERVER_USER
      value: 'foo'
    - name: INFINISPAN_SERVER_PASSWORD
      value: 'bar'
  volumes:
    - name: connect-secret-crt-volume
      secret:
        secretName: connect-secret-crt
  volumeMounts:
    - name: connect-secret-crt-volume
      mountPath: '/distributed-sessions-infinispan'